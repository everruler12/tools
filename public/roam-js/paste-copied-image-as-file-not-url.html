<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paste copied image as file not url</title>
    <style>
        body {overflow: hidden;}
        form {margin-block-end: 0;}
        button {height: 2.5em; cursor: pointer;}
    </style>
</head>
<body>
    <form action="javascript:%3B(()%3D%3E%7Blet%20l%20%3D%20function(e)%20%7B%0Ae.clipboardData.setData(%22text%2Fplain%22%2C%20%22%7B%7B%5B%5Broam%2Fjs%5D%5D%7D%7D%5Cn%20%20%20%20-%20%60%60%60javascript%5Cn%2F*%5CnPaste%20copied%20image%20as%20file%20not%20url%5CnBy%20Erik%20Newhard%5Cnhttps%3A%2F%2Froamresearch.com%2F%23%2Fapp%2Froam-depot-developers%2Fpage%2FkbED-J5ED%5CnUpdated%202021-08-23%5Cn*%2F%5Cn%5Cn%3B%20(()%20%3D%3E%20%7B%5Cn%20%20%20%20const%20interceptImagePaste%20%3D%20function%20(event)%20%7B%5Cn%20%20%20%20%20%20%20%20const%20windows_clipboard_format%20%3D%20%2F%3Cbody%3E(%5C%5Cr%3F%5C%5Cn)%3F%3C!--StartFragment--%3E%3Cimg%5B%5C%5Cs%5C%5CS%5D*%3Fsrc%3D%5B%5C%5Cs%5C%5CS%5D*%3F%5C%5C%2F%3F%3E%3C!--EndFragment--%3E(%5C%5Cr%3F%5C%5Cn)%3F%3C%5C%5C%2Fbody%3E%2F%5Cn%20%20%20%20%20%20%20%20const%20mac_clipboard_format%20%3D%20%2F%5E%3Cmeta.*%3F%3E%3Cimg%5B%5C%5Cs%5C%5CS%5D*%3Fsrc%3D%5B%5C%5Cs%5C%5CS%5D*%3F%5C%5C%2F%3F%3E%24%2F%5Cn%5Cn%20%20%20%20%20%20%20%20if%20(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.clipboardData%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.clipboardData.getData(%5C%22roam%2FinterceptedImagePaste%5C%22)%20!%3D%3D%20'true'%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20windows_clipboard_format.test(event.clipboardData.getData(%5C%22text%2Fhtml%5C%22))%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mac_clipboard_format.test(event.clipboardData.getData(%5C%22text%2Fhtml%5C%22))%5Cn%20%20%20%20%20%20%20%20%20%20%20%20)%5Cn%20%20%20%20%20%20%20%20)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.stopPropagation()%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.preventDefault()%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20const%20files%20%3D%20event.clipboardData.files%5Cn%20%20%20%20%20%20%20%20%20%20%20%20const%20newData%20%3D%20%7B%20%5C%22roam%2FinterceptedImagePaste%5C%22%3A%20%5C%22true%5C%22%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20var%20newEvent%20%3D%20new%20CustomEvent(%5C%22paste%5C%22%2C%20%7B%20cancelable%3A%20true%2C%20bubbles%3A%20true%20%7D)%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20newEvent.clipboardData%20%3D%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20files%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20getData%3A%20function%20(type)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20newData%5Btype%5D%20%7C%7C%20''%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20document.activeElement.dispatchEvent(newEvent)%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20let%20app%20%3D%20document.getElementById('app')%5Cn%20%20%20%20app.removeEventListener('onpaste'%2C%20interceptImagePaste)%5Cn%20%20%20%20app.onpaste%20%3D%20interceptImagePaste%5Cn%7D)()%3B%60%60%60%5Cn%5Cn%22)%0Ae.clipboardData.setData(%22text%2Fhtml%22%2C%20%22%3Chtml%3E%5Cr%5Cn%3Cbody%3E%5Cr%5Cn%3C!--StartFragment--%3E%3Cdiv%3E%3Cp%20style%3D%5C%22text-align%3Ainherit%3B%5C%22%3E%3Cspan%20style%3D%5C%22white-space%3Apre%3B%5C%22%3E%3C%2Fspan%3E%3Cspan%20style%3D%5C%22text-align%3Ainherit%3B%5C%22%3E%3Cspan%3E%7B%7B%5B%5Broam%2Fjs%5D%5D%7D%7D%3C%2Fspan%3E%3C%2Fspan%3E%3Cul%3E%3Cli%20style%3D%5C%22text-align%3Ainherit%3B%5C%22%3E%3Cspan%20style%3D%5C%22text-align%3Ainherit%3B%5C%22%3E%3Cspan%3E%3Cpre%3E%3Ccode%3Ejavascript%5Cn%2F*%5CnPaste%20copied%20image%20as%20file%20not%20url%5CnBy%20Erik%20Newhard%5Cnhttps%3A%2F%2Froamresearch.com%2F%23%2Fapp%2Froam-depot-developers%2Fpage%2FkbED-J5ED%5CnUpdated%202021-08-23%5Cn*%2F%5Cn%5Cn%3B%20(()%20%3D%3E%20%7B%5Cn%20%20%20%20const%20interceptImagePaste%20%3D%20function%20(event)%20%7B%5Cn%20%20%20%20%20%20%20%20const%20windows_clipboard_format%20%3D%20%2F%3Cbody%3E(%5C%5Cr%3F%5C%5Cn)%3F%3C!--StartFragment--%3E%3Cimg%5B%5C%5Cs%5C%5CS%5D*%3Fsrc%3D%5B%5C%5Cs%5C%5CS%5D*%3F%5C%5C%2F%3F%3E%3C!--EndFragment--%3E(%5C%5Cr%3F%5C%5Cn)%3F%3C%5C%5C%2Fbody%3E%2F%5Cn%20%20%20%20%20%20%20%20const%20mac_clipboard_format%20%3D%20%2F%5E%3Cmeta.*%3F%3E%3Cimg%5B%5C%5Cs%5C%5CS%5D*%3Fsrc%3D%5B%5C%5Cs%5C%5CS%5D*%3F%5C%5C%2F%3F%3E%24%2F%5Cn%5Cn%20%20%20%20%20%20%20%20if%20(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.clipboardData%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.clipboardData.getData(%5C%22roam%2FinterceptedImagePaste%5C%22)%20!%3D%3D%20'true'%20%26%26%5Cn%20%20%20%20%20%20%20%20%20%20%20%20(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20windows_clipboard_format.test(event.clipboardData.getData(%5C%22text%2Fhtml%5C%22))%20%7C%7C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mac_clipboard_format.test(event.clipboardData.getData(%5C%22text%2Fhtml%5C%22))%5Cn%20%20%20%20%20%20%20%20%20%20%20%20)%5Cn%20%20%20%20%20%20%20%20)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.stopPropagation()%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.preventDefault()%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20const%20files%20%3D%20event.clipboardData.files%5Cn%20%20%20%20%20%20%20%20%20%20%20%20const%20newData%20%3D%20%7B%20%5C%22roam%2FinterceptedImagePaste%5C%22%3A%20%5C%22true%5C%22%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20var%20newEvent%20%3D%20new%20CustomEvent(%5C%22paste%5C%22%2C%20%7B%20cancelable%3A%20true%2C%20bubbles%3A%20true%20%7D)%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20newEvent.clipboardData%20%3D%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20files%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20getData%3A%20function%20(type)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20newData%5Btype%5D%20%7C%7C%20''%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20document.activeElement.dispatchEvent(newEvent)%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20let%20app%20%3D%20document.getElementById('app')%5Cn%20%20%20%20app.removeEventListener('onpaste'%2C%20interceptImagePaste)%5Cn%20%20%20%20app.onpaste%20%3D%20interceptImagePaste%5Cn%7D)()%3B%3C%2Fcode%3E%3C%2Fpre%3E%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fli%3E%3C%2Ful%3E%3C%2Fp%3E%3Cp%20style%3D%5C%22text-align%3Ainherit%3B%5C%22%3E%3Cspan%20style%3D%5C%22white-space%3Apre%3B%5C%22%3E%3C%2Fspan%3E%3Cspan%20style%3D%5C%22text-align%3Ainherit%3B%5C%22%3E%3Cspan%3E%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fp%3E%3C%2Fdiv%3E%3C!--EndFragment--%3E%5Cr%5Cn%3C%2Fbody%3E%5Cr%5Cn%3C%2Fhtml%3E%22)%0Ae.clipboardData.setData(%22roam%2Fdata%22%2C%20%22%5B%5C%22%5E%20%5C%22%2C%5C%22~%3Agraph-name%5C%22%2C%5C%22roam-depot-developers%5C%22%2C%5C%22~%3Atype%5C%22%2C%5C%22~%3Acopy%5C%22%2C%5C%22~%3Acopied-data%5C%22%2C%5B%5B%5C%22%5E%20%5C%22%2C%5C%22~%3Acreate%2Fuser%5C%22%2C%5B%5C%22%5E%20%5C%22%2C%5C%22~%3Auser%2Fuid%5C%22%2C%5C%22PlMA638w7gW6AT6b1H1VNYEIJK43%5C%22%5D%2C%5C%22~%3Ablock%2Fstring%5C%22%2C%5C%22%7B%7B%5B%5Broam%2Fjs%5D%5D%7D%7D%5C%22%2C%5C%22~%3Acreate%2Ftime%5C%22%2C1618853769368%2C%5C%22~%3Aedit%2Fuser%5C%22%2C%5B%5C%22%5E%20%5C%22%2C%5C%22%5E5%5C%22%2C%5C%22PlMA638w7gW6AT6b1H1VNYEIJK43%5C%22%5D%2C%5C%22~%3Ablock%2Fchildren%5C%22%2C%5B%5B%5C%22%5E%20%5C%22%2C%5C%22%5E4%5C%22%2C%5B%5C%22%5E%20%5C%22%2C%5C%22%5E5%5C%22%2C%5C%22PlMA638w7gW6AT6b1H1VNYEIJK43%5C%22%5D%2C%5C%22%5E6%5C%22%2C%5C%22~%60%60%60javascript%5C%5Cn%2F*%5C%5CnPaste%20copied%20image%20as%20file%20not%20url%5C%5CnBy%20Erik%20Newhard%5C%5Cnhttps%3A%2F%2Froamresearch.com%2F%23%2Fapp%2Froam-depot-developers%2Fpage%2FkbED-J5ED%5C%5CnUpdated%202021-08-23%5C%5Cn*%2F%5C%5Cn%5C%5Cn%3B%20(()%20%3D%3E%20%7B%5C%5Cn%20%20%20%20const%20interceptImagePaste%20%3D%20function%20(event)%20%7B%5C%5Cn%20%20%20%20%20%20%20%20const%20windows_clipboard_format%20%3D%20%2F%3Cbody%3E(%5C%5C%5C%5Cr%3F%5C%5C%5C%5Cn)%3F%3C!--StartFragment--%3E%3Cimg%5B%5C%5C%5C%5Cs%5C%5C%5C%5CS%5D*%3Fsrc%3D%5B%5C%5C%5C%5Cs%5C%5C%5C%5CS%5D*%3F%5C%5C%5C%5C%2F%3F%3E%3C!--EndFragment--%3E(%5C%5C%5C%5Cr%3F%5C%5C%5C%5Cn)%3F%3C%5C%5C%5C%5C%2Fbody%3E%2F%5C%5Cn%20%20%20%20%20%20%20%20const%20mac_clipboard_format%20%3D%20%2F%5E%3Cmeta.*%3F%3E%3Cimg%5B%5C%5C%5C%5Cs%5C%5C%5C%5CS%5D*%3Fsrc%3D%5B%5C%5C%5C%5Cs%5C%5C%5C%5CS%5D*%3F%5C%5C%5C%5C%2F%3F%3E%24%2F%5C%5Cn%5C%5Cn%20%20%20%20%20%20%20%20if%20(%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.clipboardData%20%26%26%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.clipboardData.getData(%5C%5C%5C%22roam%2FinterceptedImagePaste%5C%5C%5C%22)%20!%3D%3D%20'true'%20%26%26%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20(%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20windows_clipboard_format.test(event.clipboardData.getData(%5C%5C%5C%22text%2Fhtml%5C%5C%5C%22))%20%7C%7C%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mac_clipboard_format.test(event.clipboardData.getData(%5C%5C%5C%22text%2Fhtml%5C%5C%5C%22))%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20)%5C%5Cn%20%20%20%20%20%20%20%20)%20%7B%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.stopPropagation()%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20event.preventDefault()%5C%5Cn%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20const%20files%20%3D%20event.clipboardData.files%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20const%20newData%20%3D%20%7B%20%5C%5C%5C%22roam%2FinterceptedImagePaste%5C%5C%5C%22%3A%20%5C%5C%5C%22true%5C%5C%5C%22%20%7D%5C%5Cn%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20var%20newEvent%20%3D%20new%20CustomEvent(%5C%5C%5C%22paste%5C%5C%5C%22%2C%20%7B%20cancelable%3A%20true%2C%20bubbles%3A%20true%20%7D)%5C%5Cn%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20newEvent.clipboardData%20%3D%20%7B%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20files%2C%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20getData%3A%20function%20(type)%20%7B%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20newData%5Btype%5D%20%7C%7C%20''%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5C%5Cn%5C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20document.activeElement.dispatchEvent(newEvent)%5C%5Cn%20%20%20%20%20%20%20%20%7D%5C%5Cn%20%20%20%20%7D%5C%5Cn%5C%5Cn%20%20%20%20let%20app%20%3D%20document.getElementById('app')%5C%5Cn%20%20%20%20app.removeEventListener('onpaste'%2C%20interceptImagePaste)%5C%5Cn%20%20%20%20app.onpaste%20%3D%20interceptImagePaste%5C%5Cn%7D)()%3B%60%60%60%5C%22%2C%5C%22%5E7%5C%22%2C1618853769368%2C%5C%22%5E8%5C%22%2C%5B%5C%22%5E%20%5C%22%2C%5C%22%5E5%5C%22%2C%5C%22PlMA638w7gW6AT6b1H1VNYEIJK43%5C%22%5D%2C%5C%22~%3Ablock%2Fuid%5C%22%2C%5C%22Qyf7wk_MJ%5C%22%2C%5C%22~%3Ablock%2Fopen%5C%22%2Ctrue%2C%5C%22~%3Aedit%2Ftime%5C%22%2C1629730398718%2C%5C%22~%3Ablock%2Forder%5C%22%2C0%5D%5D%2C%5C%22%5E%3A%5C%22%2C%5C%22UJMhAZfF-%5C%22%2C%5C%22%5E%3B%5C%22%2Ctrue%2C%5C%22%5E%3C%5C%22%2C1618853769368%2C%5C%22%5E%3D%5C%22%2C9%5D%2C%5B%5C%22%5E%20%5C%22%2C%5C%22%5E4%5C%22%2C%5B%5C%22%5E%20%5C%22%2C%5C%22%5E5%5C%22%2C%5C%22PlMA638w7gW6AT6b1H1VNYEIJK43%5C%22%5D%2C%5C%22%5E6%5C%22%2C%5C%22%5C%22%2C%5C%22%5E7%5C%22%2C1618853769368%2C%5C%22%5E8%5C%22%2C%5B%5C%22%5E%20%5C%22%2C%5C%22%5E5%5C%22%2C%5C%22PlMA638w7gW6AT6b1H1VNYEIJK43%5C%22%5D%2C%5C%22%5E%3A%5C%22%2C%5C%22_RAQ2n_QQ%5C%22%2C%5C%22%5E%3B%5C%22%2Ctrue%2C%5C%22%5E%3C%5C%22%2C1618853769368%2C%5C%22%5E%3D%5C%22%2C10%5D%5D%5D%22)%0Ae.preventDefault()%0A%7D%0Adocument.addEventListener(%22copy%22%2C%20l)%0Adocument.execCommand(%22copy%22)%0Adocument.removeEventListener(%22copy%22%2C%20l)%7D)()%3B">
        <button title="Paste copied image as file not url">Copy code</button>
    </form>
</body>
</html>