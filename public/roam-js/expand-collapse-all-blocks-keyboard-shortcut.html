<button class="button" onclick="copyCode()">Copy code</button>
<script>
    function copyCode() {
        let listener = function(e) {
            e.clipboardData.setData("text/plain", "- \n- {{roam/js}}\n    - ```javascript\n/*\nKeyboard shortcuts to expand/collapse all blocks on page.\nBy Erik Newhard\n*/\n\nif (!window.jQuery) {\n    let s = document.createElement('script')\n    s.src = \"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"\n    document.head.appendChild(s)\n    setTimeout(listenForKeydown, 500)\n} else {\n    listenForKeydown()\n}\n\nfunction listenForKeydown() {\n    if (window.listeningForKeydown) return\n\n    document.addEventListener(\"keydown\", function(e) {\n        // Ctrl/Cmd+Shift+Down to expand all blocks\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.keyCode == 40) {\n            e.preventDefault()\n            $('.page-title').find('button').click() // 3-dot menu next to page title\n            $('.bp3-portal').find('.bp3-menu').find('div:contains(Expand all)').click()\n        }\n\n        // Ctrl/Cmd+Shift+Up to collapse all blocks\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.keyCode == 38) {\n            e.preventDefault()\n            $('.page-title').find('button').click() // 3-dot menu next to page title\n            $('.bp3-portal').find('.bp3-menu').find('div:contains(Collapse all)').click()\n        }\n    }, false)\n\n    window.listeningForKeydown = true\n}```\n- \n")
            e.clipboardData.setData("text/html", "<html>\r\n<body>\r\n<!--StartFragment--><ul><li style=\"text-align:inherit;\"><span style=\"text-align:inherit;\"><span></span></span></li><li style=\"text-align:inherit;\"><span style=\"text-align:inherit;\"><span>{{roam/js}}</span></span><ul><li style=\"text-align:inherit;\"><span style=\"text-align:inherit;\"><span><pre><code>javascript\n/*\nKeyboard shortcuts to expand/collapse all blocks on page.\nBy Erik Newhard\n*/\n\nif (!window.jQuery) {\n    let s = document.createElement('script')\n    s.src = \"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"\n    document.head.appendChild(s)\n    setTimeout(listenForKeydown, 500)\n} else {\n    listenForKeydown()\n}\n\nfunction listenForKeydown() {\n    if (window.listeningForKeydown) return\n\n    document.addEventListener(\"keydown\", function(e) {\n        // Ctrl/Cmd+Shift+Down to expand all blocks\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.keyCode == 40) {\n            e.preventDefault()\n            $('.page-title').find('button').click() // 3-dot menu next to page title\n            $('.bp3-portal').find('.bp3-menu').find('div:contains(Expand all)').click()\n        }\n\n        // Ctrl/Cmd+Shift+Up to collapse all blocks\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.keyCode == 38) {\n            e.preventDefault()\n            $('.page-title').find('button').click() // 3-dot menu next to page title\n            $('.bp3-portal').find('.bp3-menu').find('div:contains(Collapse all)').click()\n        }\n    }, false)\n\n    window.listeningForKeydown = true\n}</code></pre></span></span></li></ul></li><li style=\"text-align:inherit;\"><span style=\"text-align:inherit;\"><span></span></span></li></ul><!--EndFragment-->\r\n</body>\r\n</html>")
            e.clipboardData.setData("roam/data", "[\"^ \",\"~:db-id\",\"roam-depot-developers\",\"~:type\",\"~:copy\",\"~:copied-data\",[[\"^ \",\"~:block/string\",\"\",\"~:create/email\",\"erik.newhard@gmail.com\",\"~:create/time\",1600318894589,\"~:block/uid\",\"Q3w3-5GeQ\",\"~:block/open\",true,\"~:edit/time\",1600318894589,\"~:edit/email\",\"erik.newhard@gmail.com\",\"~:block/order\",2],[\"^ \",\"^4\",\"{{roam/js}}\",\"^5\",\"erik.newhard@gmail.com\",\"^6\",1600315023789,\"~:block/children\",[[\"^ \",\"^4\",\"~```javascript\\n/*\\nKeyboard shortcuts to expand/collapse all blocks on page.\\nBy Erik Newhard\\n*/\\n\\nif (!window.jQuery) {\\n    let s = document.createElement('script')\\n    s.src = \\\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\\\"\\n    document.head.appendChild(s)\\n    setTimeout(listenForKeydown, 500)\\n} else {\\n    listenForKeydown()\\n}\\n\\nfunction listenForKeydown() {\\n    if (window.listeningForKeydown) return\\n\\n    document.addEventListener(\\\"keydown\\\", function(e) {\\n        // Ctrl/Cmd+Shift+Down to expand all blocks\\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.keyCode == 40) {\\n            e.preventDefault()\\n            $('.page-title').find('button').click() // 3-dot menu next to page title\\n            $('.bp3-portal').find('.bp3-menu').find('div:contains(Expand all)').click()\\n        }\\n\\n        // Ctrl/Cmd+Shift+Up to collapse all blocks\\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.keyCode == 38) {\\n            e.preventDefault()\\n            $('.page-title').find('button').click() // 3-dot menu next to page title\\n            $('.bp3-portal').find('.bp3-menu').find('div:contains(Collapse all)').click()\\n        }\\n    }, false)\\n\\n    window.listeningForKeydown = true\\n}```\",\"^5\",\"erik.newhard@gmail.com\",\"^6\",1600315029624,\"^7\",\"T-d1BhF_8\",\"^8\",true,\"^9\",1601012888942,\"^:\",\"erik.newhard@gmail.com\",\"^;\",0]],\"^7\",\"WvHb5evhm\",\"^8\",true,\"^9\",1600921027758,\"^:\",\"erik.newhard@gmail.com\",\"^;\",3],[\"^ \",\"^4\",\"\",\"^5\",\"erik.newhard@gmail.com\",\"^6\",1600318779269,\"^7\",\"yOa6FOii6\",\"^8\",true,\"^9\",1600318800798,\"^:\",\"erik.newhard@gmail.com\",\"^;\",4]]]")
            e.preventDefault()
        }
        document.addEventListener("copy", listener)
        document.execCommand("copy")
        document.removeEventListener("copy", listener)
    }
</script>