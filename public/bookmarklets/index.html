<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erik's Bookmarklets</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <!-- <script src="/assets/jquery-3.5.1.min.js"></script> -->
    <script src="/assets/vue-2.6.12.js"></script>
    <link rel="stylesheet" href="/assets/bulma.min.css">
    <style>
        p {
            margin-bottom: 0.5em
        }

        a.bookmarklet {
            padding-top: 0;
            padding-bottom: 0;
            height: 1.5em;
            cursor: move;
        }
    </style>
</head>

<body>
    <section id="vm-app-bookmarklets" class="section">
        <div class="container">
            <h1 class="title">Bookmarklets</h1>
            <p>Instructions: Drag the button to your bookmarks bar. The bookmarklet will run the script on the active
                page when clicked.</p>
            <p v-for="bm in bookmarklets">
                <a class="button bookmarklet" :href="bm.url" @click.prevent>{{bm.name}}</a>
                <span>{{bm.description}}</span>
            </p>
        </div>
    </section>


    <script>
        var vm = new Vue({
            el: "#vm-app-bookmarklets",
            data: {
                bookmarklets: [{
                    "name": "jQuerify",
                    "url": "javascript:%3B(()%3D%3E%7B%0Aif%20(window.jQuery)%20%7B%0Aconsole.log(%60jQuerify%3A%20Already%20loaded%60)%0Areturn%0A%7D%0A%0Alet%20s%20%3D%20document.createElement('script')%0As.src%20%3D%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fjquery%2F3.5.1%2Fjquery.min.js%22%0Adocument.head.appendChild(s)%0A%0Alet%20counter%20%3D%200%0Alet%20timeoutLength%20%3D%205%0Alet%20timeoutLimit%20%3D%201000%0A%0AwaitForLoad()%0A%0Afunction%20waitForLoad()%20%7B%0Aif%20(counter%20*%20timeoutLength%20%3E%3D%20timeoutLimit)%20%7B%0Aconsole.log(%60jQuerify%3A%20Timed-out%20after%20%24%7BtimeoutLimit%7D%20ms%60)%0Aalert('Error%3A%20jQuery%20not%20loaded.')%0Areturn%0A%7D%20else%20if%20(window.jQuery)%20%7B%0Aconsole.log(%60jQuerify%3A%20Loaded%20after%20%24%7Bcounter%20*%20timeoutLength%7D%20ms%60)%0A%7D%20else%20%7B%0Acounter%2B%2B%0AsetTimeout(waitForLoad%2C%20timeoutLength)%0A%7D%0A%7D%7D)()%3B",
                    "description": "Adds jQuery to the webpage. Useful for testing things in DevTools console.",
                    "src": ""
                }, {
                    "name": "Copy Title & Url",
                    "url": "javascript:%3B(()%3D%3E%7Bfunction%20getURL()%20%7B%0Areturn%20document.URL%0A%7D%0Afunction%20getTitle(url)%20%7B%0Aif%20(url.indexOf('mail.google.com')%20!%3D%3D%20-1)%20%7B%0Areturn%20document.title.replace(%2F%20-%20.*%3F%40gmail%5C.com%20-%20Gmail%24%2F%2C%20'%20-%20Gmail')%0A%7D%20else%20%7B%0Areturn%20document.title%0A%7D%0A%7D%0Aconst%20url%20%3D%20getURL()%0Aconst%20title%20%3D%20getTitle(url)%0AcopyLink(url%2C%20title)%0Afunction%20copyLink(url%2C%20title)%20%7B%0Afunction%20listener(e)%20%7B%0Ae.clipboardData.setData(%22text%2Fplain%22%2C%20title%20%2B%20'%5Cn'%20%2B%20url)%0Ae.clipboardData.setData(%22text%2Fhtml%22%2C%20%60%3Ca%20href%3D%22%24%7Burl%7D%22%3E%24%7Btitle%7D%3C%2Fa%3E%60)%0Ae.clipboardData.setData(%22text%2F_notion-text-production%22%2C%20%60%7B%22editing%22%3A%20%5B%5B%22%24%7Btitle%7D%22%2C%5B%5B%22a%22%2C%22%24%7Burl%7D%22%5D%5D%5D%5D%2C%22selection%22%3A%20%7B%22startIndex%22%3A%200%2C%22endIndex%22%3A%20%24%7Btitle.length%7D%7D%7D%60)%0Ae.preventDefault()%0A%7D%0Adocument.addEventListener(%22copy%22%2C%20listener)%0Atry%20%7B%0Adocument.execCommand(%22copy%22)%0Aconsole.log(%22Copied%3A%20%5Cn%22%2C%20%7B%0Atitle%2C%0Aurl%0A%7D)%0A%7D%20catch%20(e)%20%7B%0Aconsole.log(%22Copy%20failed.%22%2C%20e)%0A%7D%20finally%20%7B%0Adocument.removeEventListener(%22copy%22%2C%20listener)%0A%7D%0A%7D%7D)()%3B",
                    "description": "Copies a webpage's title and URL. Will be pasted as a link if supported in app (Roam, Notion, Circle, Gmail, etc.), or else as plain text separated with a linebreak (Zoom, Notepad, etc.).",
                    "src": ""
                }, {
                    "name": "Copy Evernote Highlights",
                    "url": "javascript:%3B(()%3D%3E%7B(function%20()%20%7B%0Aconst%20note_editor_document%20%3D%20document.querySelector('iframe%5Baria-label%3D%22Note%20Editor%22%5D').contentWindow.document%0Aconst%20highlights%20%3D%20note_editor_document.querySelectorAll('span%5Bdata-highlight%5D')%0AcopyHighlights(highlights)%0Afunction%20copyHighlights(highlights)%20%7B%0Aif%20(!highlights.length)%20%7B%0Aalert('No%20Evernote%20highlights%20detected.')%0Areturn%0A%7D%0Aconst%20text%20%3D%20hl_text(highlights)%0Aconst%20html%20%3D%20hl_html(highlights)%0Afunction%20listener(e)%20%7B%0Ae.clipboardData.setData(%22text%2Fplain%22%2C%20text)%0Ae.clipboardData.setData(%22text%2Fhtml%22%2C%20html)%0Ae.preventDefault()%0A%7D%0Adocument.addEventListener(%22copy%22%2C%20listener)%0Atry%20%7B%0Adocument.execCommand(%22copy%22)%0Aconsole.log(%22Copied%3A%20%5Cn%22%2C%20%7B%0Atext%2C%0Ahtml%0A%7D)%0A%7D%20catch%20(e)%20%7B%0Aconsole.log(%22Copy%20failed.%22%2C%20e)%0A%7D%20finally%20%7B%0Adocument.removeEventListener(%22copy%22%2C%20listener)%0A%7D%0A%7D%0Afunction%20hl_text(highlights)%20%7B%0Areturn%20Array.from(highlights).map(x%20%3D%3E%20x.textContent).join('%5Cr%5Cn%5Cr%5Cn')%0A%7D%0Afunction%20hl_html(highlights)%20%7B%0Areturn%20Array.from(highlights).map(x%20%3D%3E%20x.innerHTML).join('%3Cbr%3E')%0A%7D%0A%7D)()%7D)()%3B",
                    "description": "Copies the highlights of a note in Evernote.",
                    "src": ""
                }, {
                    "name": "SCSMP",
                    "url": "javascript:%3B(()%3D%3E%7Binit()%0Aasync%20function%20init()%20%7B%0Areturn%20new%20Promise(async%20(resolve%2C%20reject)%20%3D%3E%20%7B%0Atry%20%7B%0Aconsole.log('Starting%3A%20Scrape%20Circle%20Space%20Member%20Profiles%20(SCSMP)')%0Aawait%20jQuerify()%0Aif%20(!window.Papa)%20%24.getScript('https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2FPapaParse%2F5.3.0%2Fpapaparse.min.js')%0Aconst%20spaceHref%20%3D%20getSpaceHref()%0Alog(%60Loading%20members%20in%20%24%7BspaceHref%7D%60)%0Aconst%20pagesData%20%3D%20await%20fetchMembersPages(spaceHref%2C%201)%0Alet%20membersList%20%3D%20getMembersList(pagesData)%0Alog(%60Found%20%24%7BmembersList.length%7D%20members%60)%0Aawait%20Promise.all(membersList.map(async%20member%20%3D%3E%20await%20fetchMemberProfile(member))).then(result%20%3D%3E%20membersList%20%3D%20result)%0Alog(membersList)%0AdownloadList(membersList)%0Aresolve()%0A%7D%20catch%20(err)%20%7B%0Alog(err)%0Areject()%0A%7D%0A%7D)%0A%7D%0Afunction%20jQuerify()%20%7B%0Areturn%20new%20Promise(async%20(resolve%2C%20reject)%20%3D%3E%20%7B%0Aif%20(!window.jQuery)%20%7B%0Alet%20s%20%3D%20document.createElement('script')%0As.src%20%3D%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fjquery%2F3.5.1%2Fjquery.min.js%22%0Adocument.head.appendChild(s)%0Alet%20counter%20%3D%200%0Aconst%20timeoutLength%20%3D%205%0Aconst%20timeoutLimit%20%3D%201000%0AwaitForLoad()%0Afunction%20waitForLoad()%20%7B%0Aif%20(counter%20*%20timeoutLength%20%3E%3D%20timeoutLimit)%20%7B%0Alog(%60jQuerify%3A%20Timed-out%20after%20%24%7BtimeoutLimit%7D%20ms%60)%0Aalert('Error%3A%20jQuery%20not%20loaded.')%0Areject()%0A%7D%20else%20if%20(window.jQuery)%20%7B%0Alog(%60jQuerify%3A%20Loaded%20after%20%24%7Bcounter%20*%20timeoutLength%7D%20ms%60)%0Aresolve()%0A%7D%20else%20%7B%0Acounter%2B%2B%0AsetTimeout(waitForLoad%2C%20timeoutLength)%0A%7D%0A%7D%0A%7D%20else%20%7B%0Alog(%60jQuerify%3A%20Already%20loaded%60)%0Aresolve()%0A%7D%0A%7D)%0A%7D%0Aasync%20function%20fetchMembersPages(spaceHref%2C%20page)%20%7B%0Atry%20%7B%0Aconst%20url%20%3D%20%60%24%7BspaceHref%7D%2Fmembers_pagination%3Fpage%3D%24%7Bpage%7D%60%0Alog(%60Fetching%20%24%7Burl%7D%60)%0Aconst%20res%20%3D%20await%20fetch(url)%20%2F%2F%20https%3A%2F%2Fwrite-of-passage.circle.so%2Fc%2Fcourse-directory_6%2Fmembers_pagination%3Fpage%3D1%0Aconst%20data%20%3D%20await%20res.json()%0Alet%20pages%20%3D%20%5Bdata%5D%0Aif%20(data.hasNextPage%20%3D%3D%20true)%0Apages%20%3D%20pages.concat(await%20fetchMembersPages(spaceHref%2C%20page%20%2B%201))%0Areturn%20pages%0A%7D%20catch%20(err)%20%7B%0Areturn%20log(err)%0A%7D%0A%7D%0Aasync%20function%20fetchMemberProfile(member)%20%7B%0Aconst%20res%20%3D%20await%20fetch(member.link)%20%2F%2F%20https%3A%2F%2Fwrite-of-passage.circle.so%2Fu%2F38804995%0Aconst%20data%20%3D%20await%20res.text()%0Alog(%60Fetched%20%24%7Bmember.link%7D%20(%24%7Bmember.name%7D)%60)%0Aconst%20mp%20%3D%20%24(data).find('.member__profile')%0Areturn%20%7B%0A%22Name%22%3A%20getName()%2C%20%2F%2F%20'Erik%20Newhard'%0A%22Tagline%22%3A%20getTagline()%2C%20%2F%2F%20%60Forum%20moderator%20for%20Nat's%20Roam%20course%60%0A%22Bio%22%3A%20getBio()%2C%20%2F%2F%20%60Hello!%20I'm%20a%20forum%20moderator%20in%20Effortless%20Output%20with%20Roam%2C%20and%20a%20student%20in%20BASB%20Cohort%2010%20%26%2011%20and%20WoP%20Cohort%205%20%26%206.%20I'm%20also%20a%20teacher's%20assistant%20in%20a%20habit%20building%20course.%20I%20use%20Roam%20and%20Notion.%60%0A%22Location%22%3A%20getLocation()%2C%20%2F%2F%20'Denver%2C%20CO'%0A%22Email%22%3A%20getEmail()%2C%20%2F%2F%20'erik.newhard%40gmail.com'%0A%22Website%22%3A%20getWebsite()%2C%20%2F%2F%20'eriknewhard.com'%0A%22Linkedin%22%3A%20getLinkedin()%2C%20%2F%2F%20'https%3A%2F%2Fwww.linkedin.com%2Fin%2Ferik-newhard%2F'%0A%22Twitter%22%3A%20getTwitter()%2C%20%2F%2F%20'https%3A%2F%2Ftwitter.com%2FErikNewhard'%0A%22Facebook%22%3A%20getFacebook()%2C%20%2F%2F%20''%0A%22Instagram%22%3A%20getInstagram()%2C%20%2F%2F%20'https%3A%2F%2Fwww.instagram.com%2Feriknewhard%2F'%0A%22Label%22%3A%20getLabel()%2C%20%2F%2F%20%5B'Admin'%2C%20'Moderator'%5D%0A%22Tag%20Label%22%3A%20getTagLabel()%2C%20%2F%2F%20%5B'Mentor'%5D%0A%22User%20ID%22%3A%20member.link.split('%2F').pop()%2C%20%2F%2F%20'38804995'%0A%22Profile%20Link%22%3A%20member.link%2C%20%2F%2F%20'https%3A%2F%2Fwrite-of-passage.circle.so%2Fu%2F38804995'%0A%22Profile%20Image%22%3A%20getProfileImage()%2C%20%2F%2F%20'https%3A%2F%2Fwrite-of-passage.circle.so%2Frails%2Factive_storage%2Frepresentations%2FeyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBdFlJIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--5ef4b48250ae14cd2c559b8373d2b149f99649a3%2FeyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdCam9VY21WemFYcGxYM1J2WDJ4cGJXbDBXd2RwQWl3QmFRSXNBUT09IiwiZXhwIjpudWxsLCJwdXIiOiJ2YXJpYXRpb24ifX0%3D--b2676f36f6b8dc9f722781a1b3675d7b27c18366%2Feverruler%2520dark.png'%0A%7D%0Afunction%20getName()%20%7B%0Areturn%20mp.find('.member__name').text().trim()%0A%7D%0Afunction%20getEmail()%20%7B%0Aconst%20href%20%3D%20mp.find('.user__email%20%3E%20a').attr('href')%0Areturn%20href%20%3F%20href.replace('mailto%3A'%2C%20'')%20%3A%20''%0A%7D%0Afunction%20getLocation()%20%7B%0Areturn%20mp.find('.member__location').text().trim()%0A%7D%0Afunction%20getWebsite()%20%7B%0Areturn%20mp.find('.member__website%20%3E%20a').attr('href')%20%7C%7C%20''%0A%7D%0Afunction%20getLinkedin()%20%7B%0Areturn%20mp.find('.user__linkedin%20%3E%20a').attr('href')%20%7C%7C%20''%0A%7D%0Afunction%20getTwitter()%20%7B%0Aconst%20href%20%3D%20mp.find('.user__twitter%20%3E%20a').attr('href')%0Alet%20username%0Aif%20(href)%20%7B%0Aif%20(href.split('%2F').length%20%3E%201)%0Ausername%20%3D%20href.split('com%2F').pop()%0A.replace(%2F%5C%2F%24%2F%2C%20'')%20%2F%2F%20remove%20ending%20slash%0A%2F%2F%20https%3A%2F%2Ftwitter.com%2FErikNewhard%0A%2F%2F%20https%3A%2F%2Ftwitter.com%2FErikNewhard%2F%0A%2F%2F%20Https%3A%2F%2Ftwitter.com%2FErikNewhard%0A%2F%2F%20Https%3A%2F%2FTwitter.com%2FErikNewhard%0A%2F%2F%20HTTPS%3A%2F%2Ftwitter.com%2FErikNewhard%0A%2F%2F%20https%3A%2F%2Fwww.twitter.com%2FErikNewhard%0A%2F%2F%20https%3A%2F%2Fmobile.twitter.com%2FErikNewhard%0A%2F%2F%20http%3A%2F%2Ftwitter.com%2FErikNewhard%0A%2F%2F%20twitter.com%2FErikNewhard%0A%2F%2F%20Twitter.com%2FErikNewhard%0Aelse%20if%20(href.match(%2F%5E%40%2F))%0Ausername%20%3D%20href.replace(%2F%5E%40%2F%2C%20'')%0A%2F%2F%20%40ErikNewhard%0Aelse%0Ausername%20%3D%20href%0A%2F%2F%20ErikNewhard%0Areturn%20%60https%3A%2F%2Ftwitter.com%2F%24%7Busername%7D%60%0A%7D%20else%0Areturn%20''%0A%7D%0Afunction%20getFacebook()%20%7B%0Areturn%20mp.find('.user__facebook%20%3E%20a').attr('href')%20%7C%7C%20''%0A%7D%0Afunction%20getInstagram()%20%7B%0Areturn%20mp.find('.user__instagram%20%3E%20a').attr('href')%20%7C%7C%20''%0A%7D%0Afunction%20getProfileImage()%20%7B%0Aconst%20img%20%3D%20mp.find('.user__profile-image%20%3E%20img')%0Aconst%20src%20%3D%20img.attr('src')%0Areturn%20src%20%26%26%20!src.match('https%3A%2F%2Fsecure.gravatar.com%2F')%20%3F%20window.location.origin%20%2B%20src%20%3A%20''%0A%7D%0Afunction%20getLabel()%20%7B%0Areturn%20mp.find('.label-brand').text().trim()%20%7C%7C%20''%0A%7D%0Afunction%20getTagLabel()%20%7B%0Areturn%20mp.find('.member-tags--label%20%3E%20span').text().trim()%20%7C%7C%20''%0A%7D%0Afunction%20getTagline()%20%7B%0Areturn%20mp.find('.member__tagline').text().trim()%20%7C%7C%20''%0A%7D%0Afunction%20getBio()%20%7B%0Areturn%20mp.find('.member__bio').text().trim()%20%7C%7C%20''%0A%7D%0A%7D%0Afunction%20getSpaceHref()%20%7B%0Aconst%20spaceName%20%3D%20window.location.pathname.split('%2F')%5B2%5D%0Aconst%20spaceHref%20%3D%20window.location.origin%20%2B%20'%2Fc%2F'%20%2B%20spaceName%0Aconst%20href%20%3D%20window.location.href%0Aif%20(href.match(spaceHref))%20%7B%0Areturn%20spaceHref%0A%7D%20else%20%7B%0Alog(%60Error%3A%20unsupported%20space%20href%20%24%7Bhref%7D%60)%0A%7D%0A%7D%0Afunction%20getMembersList(pagesData)%20%7B%0Aconst%20membersListHtml%20%3D%20pagesData.map(pageData%20%3D%3E%20pageData.content).join()%0Areturn%20%24('%3Cdiv%3E')%0A.append(membersListHtml)%0A.find('.member-card__listing')%0A.toArray()%0A.map(getMemberNameAndLink)%0A%7D%0Afunction%20getMemberNameAndLink(el)%20%7B%0Areturn%20%7B%0Aname%3A%20%24(el).find('.user__name').text().trim()%2C%0Alink%3A%20window.location.origin%20%2B%20%24(el).find('a').attr('href').split('%3F')%5B0%5D%0A%7D%0A%7D%0Afunction%20log(...messages)%20%7B%0Aconsole.log('SCSMP%20-'%2C%20...messages)%0A%7D%0Afunction%20getTitle()%20%7B%0A%2F%2F%20%24('.title-name').text().trim()%20%2F%2F%20doesn't%20work%20when%20on%20a%20post%20page%0Aconst%20date%20%3D%20new%20Date().toISOString().replace('T'%2C%20'%20').replace(%2F%3A%5Cd%5Cd%5C.%5Cd%5Cd%5CdZ%2F%2C%20'').replace('%3A'%2C%20'-')%0Aconst%20title%20%3D%20document.title.replace(%2F(%5C(%5Cd%2B%3F%5C)%20)%3F(.%2B%3F)%20%5C%7C%20(.%2B%3F)%24%2F%2C%20'%243%20-%20%242')%20%2F%2F%20'(1)%20Course%20Directory%20%7C%20Write%20of%20Passage'%20-%3E%20'Write%20of%20Passage%20-%20Course%20Directory'%0Areturn%20%60%24%7Btitle%7D%20ymembers%20(%24%7Bdate%7D)%60%0A%7D%0Afunction%20downloadList(membersList)%20%7B%0Aconst%20title%20%3D%20getTitle()%0Aconst%20csv%20%3D%20Papa.unparse(membersList)%0Adownload(csv%2C%20%60%24%7Btitle%7D.csv%60)%0Adownload(JSON.stringify(membersList%2C%20null%2C%202)%2C%20%60%24%7Btitle%7D.json%60)%0A%7D%0Afunction%20download(text%2C%20filename)%20%7B%0Alet%20a%20%3D%20%24('%3Ca%3E'%2C%20%7B%0A'href'%3A%20'data%3Atext%2Fplain%3Bcharset%3Dutf-8%2C'%20%2B%20encodeURIComponent(text)%2C%0A'download'%3A%20filename%2C%0A'style'%3A%20'display%3Anone%3B'%0A%7D).appendTo('body')%0Aa%5B0%5D.click()%0Aa.remove()%0A%7D%7D)()%3B",
                    "description": "Scrape Circle space member profiles into .csv and .json (Open Console to view progress.)",
                    "src": ""
                }]
                // , {
                //     "name": "",
                //     "url": "",
                //     "description": "",
                //     "src": ""
                // }
            },

            methods: {

            },

            mounted() {

            }
        })
    </script>

    <section id="vm-app-bookmarklet-maker" class="section">
        <div class="container">
            <h1 class="title">Bookmarklet Maker</h1>
            <p>Instructions: Paste code in the textarea below to convert into a bookmarklet.</p>
            <input v-model="name" placeholder="Name" @focus="$event.target.select()">
            <div class="columns">
                <div class="column">
                    <textarea class="textarea" v-model="code" placeholder="Code"></textarea>
                </div>

                <div class="column">
                    <textarea class="textarea" v-model="url" readonly></textarea>
                    <button class="button" @click="copy(url)">Copy</button>
                    <span>Bookmarklet to drag:</span>
                    <a class="button bookmarklet" :href="url" @click.prevent>{{name}}</a>
                </div>
            </div>


        </div>
    </section>

    <script>
        var vm2 = new Vue({
            el: "#vm-app-bookmarklet-maker",
            data: {
                name: 'Bookmarklet', // text input
                code: '', // textarea
            },

            computed: {
                url() {
                    return 'javascript:' + encodeURIComponent(this.createIIFE(this.code))
                },
            },

            methods: {
                createIIFE(code) { // https://en.wikipedia.org/wiki/Immediately_invoked_function_expression
                    code = this.trimLines(code)
                    return `;(()=>{${code}})();`
                },

                trimLines(text) {
                    return text
                        .split(/\r?\n/)
                        .map(line => line.trim())
                        .filter(line => line != "")
                        .join('\n')
                },

                copy(text_to_copy) {
                    function listener(e) {
                        e.clipboardData.setData("text/plain", text_to_copy)
                        e.preventDefault()
                    }

                    document.addEventListener("copy", listener)

                    try {
                        document.execCommand("copy")
                        console.log("Copied:", text_to_copy)
                    } catch (e) {
                        console.log("Copy failed.", e)
                    } finally {
                        document.removeEventListener("copy", listener)
                    }
                }
            },
        })
    </script>

</body>

</html>